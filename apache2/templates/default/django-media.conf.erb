<VirtualHost *:<%= @params[:port] %>>
  ServerName <%= @params[:name] %>
  DocumentRoot <%= @params[:parent_dir] + @params[:docroot] %>

  LogLevel info
  ErrorLog <%= @node[:apache][:log_dir] %>/<%= @params[:name] %>-error.log
  LogFormat "\"%{X-Forwarded-For}i\" %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\"" combined-elb
  CustomLog <%= @node[:apache][:log_dir] %>/<%= @params[:name] %>-access.log combined-elb
  
  <Directory <%= @params[:parent_dir] + @params[:docroot] %>>
    Options FollowSymLinks
    Options -Indexes
    AllowOverride None
    Order allow,deny
    Allow from all
  </Directory>

  Alias /admin/ <%= @params[:parent_dir] + @params[:admin_media] %>
  
</VirtualHost>
