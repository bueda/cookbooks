#
# /etc/sudoers
# 
# Generated by Chef for <%= @node[:fqdn] %>
# 

Defaults        !lecture,tty_tickets,!fqdn

# User privilege specification
root    			ALL=(ALL) ALL

<% @sudoers_users.each do |user| -%>
<%= user %> ALL=(ALL) NOPASSWD:ALL
<% end -%>

# Members of the sysadmin group may gain root privileges
%admin 		ALL=(ALL) NOPASSWD:ALL

<% @sudoers_groups.each do |group| -%>
# Members of the group '<%= group %>' may gain root privileges
%<%= group %> ALL=(ALL) NOPASSWD:ALL
<% end -%>

<% @no_password_cmds.each do |cmd, perms| -%>
<% perms['groups'].each do |group| -%>
# Members of the group '<%= group %>' may use <%= cmd %>
%<%= group %> ALL=(ALL) NOPASSWD:<%= cmd %>
<% end if perms['groups'] -%>
<% perms['users'].each do |group| -%>
<%= user %> ALL=(ALL) NOPASSWD:<%= cmd %>
<% end if perms['users'] -%>
<% end -%>
